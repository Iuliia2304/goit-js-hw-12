{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '51317900-f0372c6e5a84e0989a980511e';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function getImagesByQuery(query, page = 1) {\n     try {\n     const params = {\n          key: API_KEY,\n          q: query,\n          image_type: 'photo',\n          orientation: 'horizontal',\n          safesearch: true,\n          per_page: 15,\n          page,\n     };\n     \n     const response = await axios.get(BASE_URL, { params });\n     return response.data;\n     } catch (error) {\n          throw new Error('Failed to fetch images');\n     }\n}","// js/render-functions.js\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst galleryContainer = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more');\n\nlet lightbox = new SimpleLightbox('.gallery a', {\n     captionsData: 'alt',\n     captionDelay: 250,\n});\n\n\nexport function createGallery(images) {\n     const markup = images\n     .map(\n          image => `\n          <li class=\"gallery-item\">\n          <a href=\"${image.largeImageURL}\">\n          <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\" />\n          </a>\n          <div class=\"info\">\n          <p>üëç ${image.likes}</p>\n          <p>üëÅÔ∏è ${image.views}</p>\n          <p>üí¨ ${image.comments}</p>\n          <p>‚¨áÔ∏è ${image.downloads}</p>\n          </div>\n          </li>\n          `\n     )\n     .join('');\n     \n     galleryContainer.insertAdjacentHTML('beforeend', markup);\n     \n     const imagesInGallery = galleryContainer.querySelectorAll('img');\n     const promises = Array.from(imagesInGallery).map(img => {\n          return new Promise(resolve => {\n               if (img.complete) resolve();\n               else {\n                    img.onload = () => resolve();\n                    img.onerror = () => resolve();\n               }\n          });\n     });\n     \n     Promise.all(promises).then(() => {\n          lightbox.refresh();\n          hideLoader();\n     });\n     \n     \n}\nexport function clearGallery() {\n     galleryContainer.innerHTML = '';\n}\n\n\nexport function showLoader() {\n     loader.classList.remove('hidden');\n     \n}\n\nexport function hideLoader() {\n     loader.classList.add('hidden');\n     \n}\n\nexport function showLoadMoreButton() {\n     loadMoreBtn.classList.remove('hidden');\n     \n}\n\nexport function hideLoadMoreButton() {\n     loadMoreBtn.classList.add('hidden');\n     \n}\n","\nimport { getImagesByQuery } from './js/pixabay-api';\nimport {\n     createGallery,\n     clearGallery,\n     showLoader,\n     hideLoader,\n     showLoadMoreButton,\n     hideLoadMoreButton,\n} from './js/render-functions';\n\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector('.form'); \nconst loadMoreBtn = document.querySelector('.load-more');\nconst galleryList = document.querySelector('.gallery');\n\nlet query = '';\nlet page = 1;\nlet totalHits = 0;\n\nform.addEventListener('submit', async event => {\n     event.preventDefault();\n     query = event.target.elements['search-text'].value.trim(); \n     page = 1;\n     clearGallery();\n     hideLoadMoreButton();\n     \n     if (!query) {\n          iziToast.warning({\n               message: 'Please enter a search term!',\n               position: 'topRight',\n          });\n          return;\n     }\n     \n     showLoader();\n     \n     try {\n          const data = await getImagesByQuery(query, page);\n          totalHits = data.totalHits;\n          \n          if (data.hits.length === 0) {\n               iziToast.error({\n                    message: 'No images found. Try a different query.',\n                    position: 'topRight',\n               });\n               return;\n          }\n          \n          createGallery(data.hits);\n          \n          if (totalHits > 15) {\n               showLoadMoreButton();\n          }\n     } catch (error) {\n          iziToast.error({\n               message: 'Something went wrong. Try again later.',\n               position: 'topRight',\n          });\n     } finally {\n          hideLoader();\n     }\n});\n\n\nloadMoreBtn.addEventListener('click', async () => {\n     page += 1;\n     showLoader();\n     \n     try {\n          const data = await getImagesByQuery(query, page);\n          createGallery(data.hits);\n          \n          const { height: cardHeight } = document\n          .querySelector('.gallery-item')\n          .getBoundingClientRect();\n          \n          window.scrollBy({\n               top: cardHeight * 2,\n               behavior: 'smooth',\n          });\n          \n          const loadedImages = document.querySelectorAll('.gallery-item').length;\n          if (loadedImages >= totalHits) {\n               hideLoadMoreButton();\n               iziToast.info({\n                    message: \"We're sorry, but you've reached the end of search results.\",\n                    position: 'topRight',\n               });\n          }\n     } catch (error) {\n          iziToast.error({\n               message: 'Failed to load more images.',\n               position: 'topRight',\n          });\n     } finally {\n          hideLoader();\n     }\n     \n});\n"],"names":["API_KEY","BASE_URL","getImagesByQuery","query","page","params","axios","galleryContainer","loader","loadMoreBtn","lightbox","SimpleLightbox","createGallery","images","markup","image","imagesInGallery","promises","img","resolve","hideLoader","clearGallery","showLoader","showLoadMoreButton","hideLoadMoreButton","form","totalHits","event","iziToast","data","cardHeight"],"mappings":"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"}